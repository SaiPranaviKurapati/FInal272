<div>
  <div class="task" cdkDrag>
    <p class="taskHeading">{{ content.summary }}</p>
    <hr />
    <!-- <p class="taskDisc">{{content.disc}}</p> -->
    <div class="icon-container">
      <button type="button" class="taskDisc btn">
        {{ content.description }}</button
      ><!-- Display the bug icon if the task type is 'bug' -->
      <i *ngIf="content.issuetype == 'bug'" class="fas fa-icon type fa-bug"></i>
      <!-- Display the tasks icon if the task type is 'task' -->
      <i *ngIf="content.issuetype == 'task'" class="fas fa-icon type fa-tasks"></i>
      <!-- <i class=" fas type fa-regular fa-code-merge" style="top: 33px; color: #4cbb17;"></i> -->
      
      <i *ngIf="content.priority == 'high'" class="fas fa-icon type fa-solid fa-angle-up high" ></i>
      <i *ngIf="content.priority == 'low'" class="fas fa-icon type fa-solid fa-angle-down low"></i>
      <i *ngIf="content.priority == 'medium'" class="fas fa-icon type fa-solid fa-equals medium"></i>
      </div>
      <!-- <i class="fas fa-icon priority fa-bug"></i> -->
      <p class="assign">Assigned to :  {{ content.assignee }}</p>
      <p class="assign">Assigned to :  {{ content.reporter }}</p>

    <button
      class="btn btn-primary btn-sm details"
      (click)="openModal(modalContent)"
    >
      View Details
    </button>
    <br />
  </div>
</div>

<!-- Modal -->
<!-- <div
  class="modal fade"
  id="exampleModalCenter"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true"
> -->
<ng-template #modalContent>
  <!-- <div class="modal-dialog modal-dialog-centered custom-modal-dialog" role="document"> -->
    <div class="modal-content">
      <div class="modal-body">
        <div class="update-issue-container">
          <h2>Update Task</h2>
          <form>
            <!-- Hidden input for taskId -->
            <input type="hidden" id="taskId" [value]="currentTaskId" />

            <div class="form-group">
              <label for="projectDropdown">Project</label>
              <select id="project" name="project" class="form-control" [(ngModel)]="taskToEdit.project">
                <option value="project1">Project 1</option>
                <option value="project2">Project 2</option>
                <!-- Add more project options here -->
              </select>
            </div>

            <div class="form-group">
              <label for="issueTypeDropdown">Issue Type</label>
              <select id="issuetype" name="issuetype" class="form-control" [(ngModel)]="taskToEdit.issuetype">
                <option value="task">Task</option>
                <option value="bug">Bug</option>
                <!-- Add more issue type options here -->
              </select>
            </div>

            <div class="form-group">
              <label for="statusDropdown">Status</label>
              <select id="status" name="status" class="form-control" [(ngModel)]="taskToEdit.status">
                <option value="to-do">To-Do</option>
                <option value="in-progress">In Progress</option>
                <option value="done">Done</option>
                <!-- Add more status options here -->
              </select>
            </div>

            <div class="form-group">
              <label for="summary">Summary</label>
              <input type="text" id="summary" name="summary" class="form-control" [(ngModel)]="taskToEdit.summary" />
            </div>

            <div class="form-group">
              <label>Description</label>
              <textarea class="form-control" id="description" name="description" [(ngModel)]="taskToEdit.description"></textarea>
            </div>

            <div class="form-group">
              <label for="assigneeDropdown">Assignee</label>
              <!-- <select id="assignee" name="assignee" class="form-control" [(ngModel)]="taskToEdit.assignee">
                <option value="user1">User 1</option>
                <option value="user2">User 2</option>
              </select> -->
              <select [(ngModel)]="taskToEdit.assignee" name="assignee">
                <option *ngFor="let user of users" [value]="user.username">{{ user.name }}</option>
              </select>
            </div>

            <div class="form-group">
              <label for="reporterDropdown">Reporter</label>
              <!-- <select id="reporter" name="reporter" class="form-control" [(ngModel)]="taskToEdit.reporter">
                <option value="user1">User 1</option>
                <option value="user2">User 2</option>
              </select> -->
              <select [(ngModel)]="taskToEdit.reporter" name="assignee">
                <option *ngFor="let user of users" [value]="user.username">{{ user.name }}</option>
              </select>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Close</button>
        <button type="button" class="btn btn-primary" (click)="saveChanges()">Save Changes</button>
      </div>
    </div>
  <!-- </div> -->
</ng-template>


